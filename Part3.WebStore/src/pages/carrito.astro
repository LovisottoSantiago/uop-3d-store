---
import BaseLayout from "@/layouts/BaseLayout.astro";
---

<BaseLayout>
  <section class="px-6 py-12 max-w-2xl mx-auto">
    <h2 class="text-2xl font-bold mb-6">ðŸ›’ Tu Carrito</h2>
    <div id="carritoContainer"></div>
    <a href="/checkout" class="mt-6 inline-block bg-green-600 text-white px-6 py-2 rounded-lg">Finalizar compra</a>
  </section>

<script>
  function renderCarrito() {
    const container = document.getElementById("carritoContainer");
    if (!container) return;

    let carrito = JSON.parse(localStorage.getItem("carrito") || "[]");

    if (carrito.length === 0) {
      container.innerHTML = "<p>El carrito estÃ¡ vacÃ­o</p>";
      return;
    }

    let html = "<ul class='space-y-4'>";
    let total = 0;
    carrito.forEach((item: { precio: number; cantidad: number; nombre: any; }) => {
      total += item.precio * item.cantidad;
      html += `
        <li class="flex justify-between items-center border-b pb-2">
          <span>${item.nombre} (x${item.cantidad})</span>
          <span>$${(item.precio * item.cantidad).toFixed(2)}</span>
        </li>
      `;
    });
    html += "</ul>";
    html += `<p class="font-bold mt-4">Total: $${total.toFixed(2)}</p>`;
    container.innerHTML = html;
  }

  renderCarrito();
</script>
</BaseLayout>
